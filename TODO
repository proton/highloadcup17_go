Tip 2: Pooling the buffer

sync.Pool is your best friend.

Profile your program in production. go tool pprof --alloc_objects your-program mem.pprof usually gives better insights for optimization opportunities than go tool pprof your-program cpu.pprof.

Golang 1.9: A new type in the sync package serves as a concurrent map with amortized-constant-time loads, stores, and deletes. Thus, multiple go routines can call a map's methods concurrently.

Свой сериалайзер? Позволит пол хранить как bool, строки как []byte

https://habrahabr.ru/company/badoo/blog/301990/

user/visits хранить как сортированный массив!!!

profile visits.Create

EntityVisitsRepo as array[map]